# 机器人行走

&emsp;&emsp;利用机器人传动的机械知识，组装好OSTD开源机器人小车。本节我们就来研究如何让机器人像我们人类一样运动：前进、后退、左转、右转。

## 利用`电机控件`控制机器人行走
&emsp;&emsp;我们人类是大脑控制脚行走的，那眼前的这台机器人小车，你要如何控制它行走？其实就是控制机器人的电机。请你找找看，编程软件中的机器人模块，有没有关于机器人电机的控件？试试找到的电机控件。

![电机控制指令](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210312122822.png)

&emsp;&emsp;与电机有关的指令如下，这个指令有两个参数：

- 第1个是选择左右电机；
- 第2个是转速，数字范围是-255-255。
  - 数字绝对值越大，转速越快；
  - 正负表示旋转方向相反。



&emsp;&emsp;我们人会前进、后退、停止、转弯。这个机器人怎么实现？，想想就用电机控制指令的能否实现前进、后退、转弯？

![前进后退示意图](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210312124644.png)

![左转右转示意图](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210312124959.png)

&emsp;&emsp;如上图所示，将控制左右电机两个指令组合使用，就可以实现机器人小车的前进、后退、转向运动。


## 利用`行走控件`控制机器人行走
&emsp;&emsp;其实，在xDing软件机器人模块中，还有：前进、后退、停止、转弯这些行走相关的控件。有了我们刚才的思考，这些指令你能理解吗？试试吧。

![行走控件OSTD版](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210319105022.png)

&emsp;&emsp;我们可以把`行走控件`理解为是对`电机控件`的封装，如下图所示,`行走控件`中的每一种行走状态等效于两个`电机控件`的组合。

![电机指令和行走指令等效对比图](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210319105558.png)

&emsp;&emsp;你可以发现，利用`行走控件`控制机器人行走更加方便，并且脚本看上去更加清晰直观；但这并不意味着就不需要`电机控件`了，对于更加底层的`电机控件`来说，它可以更加精细的控制机器人的行走。我们来看下面的案例：

![两种右转方式对比](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210319110427.png)

&emsp;&emsp;可以发现`行走控件`的`左转`、`右转`可以绕着机器人中心完成转向，但无法以机器人外部点作为旋转中心，而利用`电机控件`组合不同的速度，就可以让机器人绕外部点为中心转向。


## 编程任务：控制机器人走正方形路线

![走正方形示意图](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210319122035.png)

**任务分析**：控制机器人先`前进`一段路、再`转90度`，重复4次这样的就可以走出正方形。也就是说现在要解决如下两个小问题：
- 如何控制小车直行的距离？
- 如何控制小车转弯时的角度？

&emsp;&emsp;由于，机器人的`行走控件`和`电机控制`可控的参数都是速度，**如果要转化为控制行走的距离和转向的角度，需要引入`时间`控制，使用`等待时间控件`。**

![走正方形脚本](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210319122855.png)

&emsp;&emsp;涉及到机器人行走连续状态切换（如：先后退，再右转，再前进）时，需要加入`等待时间`控制当前状态持续的时间。至于设置`等待时间`具体为多少，则需要结合实际情况对机器人调试。这是一个考验你耐心与智慧的过程，加油！

