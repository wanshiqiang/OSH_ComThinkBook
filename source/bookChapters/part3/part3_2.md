# 制作开关风扇

## 项目情景

![](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210427144743.png)

项目演示：扫码观看

![](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210427153125.png)

## 活动目标

1. 掌握马达、风扇、马达模块的使用方法；
2. 利用触碰传感器和马达，掌握开关风扇的算法的编程。

## 设备介绍

### 1.硬件连接

在OSTD开源机器人套件中，我们可以找到`风扇`、`马达`、`马达模块`，将`马达`的红黑连接线接在`马达模块`上，再将`马达模块`连接在`接口1`上；此外，将`触碰传感器`连接在`接口6`上，作为控制风扇启动和停止的开关。如下图所示：

![开关风扇硬件连接图](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210427125836.png)

可以利用套装中提供的乐高积木设计搭建一个风扇的身体，如下如图所示：

![风扇造型参考](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210427131357.png)

### 2.硬件调试

硬件连接好后，对每一个连接的设备进行单独的驱动调试必不可少。对于输入设备`触碰传感器`的调试方法，在开关灯的项目中已经介绍过了，这里就不再赘述。对于输出设备`马达`，我们可以使用`设置接口电平`指令来驱动，如下图所示：

![设置接口电平指令](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210427133244.png)

选择相应的接口，若输出高电平风扇转动，输出低电平风扇停止，则说明马达装置连接正常。

## 编程探究

### 1.需求描述

* 当风扇停止时，如果按下开关，则风扇转动；

* 当风扇启动后，如果按下开关，则风扇停止。

### 2.算法设计

经过调试，控制风扇启动和停止是简单的，但**风扇是一种输出设备，并不会返回它当前是启动还是停止的状态信息给主板**，如何解决这个问题呢？在编程中，我们**可以利用变量同步记录风扇的状态，用变量中的`1`表示`启动状态`，用`0`表示`停止状态`**。

![算法流程图和关键指令参考](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210427140820.png)

思考：为什么要等待0.2秒呢？

### 3.参考脚本

![开关风扇参考脚本](https://gitee.com/wansq0211/markdownImg/raw/master/img/20210427141338.png)

## 成果小结

* 信息视角看项目
  * 信息输入视角：`触控传感器`作为开关是一种输入设备，提供给主板`开1`或`关0`的两种信号，我们称为`数字信号`。
  * 信息输出视角：`马达`作为一种动作输出设备，在本项目中，也只有两种状态：`高电平`或`低电平`，我们称为`数字输出`。

* 编程技巧
  * 如果无法获取输出设备的状态，我们可以用变量来记录输出设备的状态。

